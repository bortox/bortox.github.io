<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>Convert jekyll blog images to avif and webp with jekyll picture tag &#183; üá¨üáß Andrea Bortolotti | Bortox üá™üá∫</title>
<meta name=title content="Convert jekyll blog images to avif and webp with jekyll picture tag &#183; üá¨üáß Andrea Bortolotti | Bortox üá™üá∫"><meta name=description content="Personal blog of Andrea Bortolotti, containing school notes, photos and tech fun facts."><link rel=canonical href=https://bortox.it/en/article/jekyll-blog-webp-avif-images/><link rel=preload href=/css/main.bundle.min.1a2b14deb0caba4908abcf58b7cbc31753e9ed617485114db47662fb7efefb8ffe3c2f7c3b6710a999a856adf251e83493b9ba64f1cfc42674c93c2e24b1b465.css as=style><link type=text/css rel=stylesheet href=/css/main.bundle.min.1a2b14deb0caba4908abcf58b7cbc31753e9ed617485114db47662fb7efefb8ffe3c2f7c3b6710a999a856adf251e83493b9ba64f1cfc42674c93c2e24b1b465.css><link rel=preload as=script href=/js/appearance.min.d3c4a8697dfaeae52183310ec6038cc1c5ee9bba8ebbf37e06cfa651b8eeb713b98d081c36f1e13b25e480c4d0afab53eadd138997e5893884a12d66fa70ddb2.js integrity="sha512-08SoaX366uUhgzEOxgOMwcXum7qOu/N+Bs+mUbjutxO5jQgcNvHhOyXkgMTQr6tT6t0TiZfliTiEoS1m+nDdsg=="><script type=text/javascript src=/js/appearance.min.d3c4a8697dfaeae52183310ec6038cc1c5ee9bba8ebbf37e06cfa651b8eeb713b98d081c36f1e13b25e480c4d0afab53eadd138997e5893884a12d66fa70ddb2.js integrity="sha512-08SoaX366uUhgzEOxgOMwcXum7qOu/N+Bs+mUbjutxO5jQgcNvHhOyXkgMTQr6tT6t0TiZfliTiEoS1m+nDdsg=="></script><link rel=preload as=script href=/js/main.bundle.min.19f5d1cb0706a16e947769b1b4032e2b58d31cd6605e5df21da179b989334453aaec0e72e8d8e485ca0044b1baddc7350def371dbd34efc516e997e39d035359.js integrity="sha512-GfXRywcGoW6Ud2mxtAMuK1jTHNZgXl3yHaF5uYkzRFOq7A5y6NjkhcoARLG63cc1De83Hb0078UW6ZfjnQNTWQ=="><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.19f5d1cb0706a16e947769b1b4032e2b58d31cd6605e5df21da179b989334453aaec0e72e8d8e485ca0044b1baddc7350def371dbd34efc516e997e39d035359.js integrity="sha512-GfXRywcGoW6Ud2mxtAMuK1jTHNZgXl3yHaF5uYkzRFOq7A5y6NjkhcoARLG63cc1De83Hb0078UW6ZfjnQNTWQ==" data-copy=Copy data-copied=Copied></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel="alternate icon" type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/svg+xml href=/favicon.svg><link rel="alternate icon" type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://bortox.it/en/article/jekyll-blog-webp-avif-images/"><meta property="og:site_name" content=":gb: Andrea Bortolotti | Bortox üá™üá∫"><meta property="og:title" content="Convert jekyll blog images to avif and webp with jekyll picture tag"><meta property="og:description" content="How to convert the images of a jekyll blog to avif and webp formats using jekyll picture tag"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="article"><meta property="article:published_time" content="2022-07-20T00:24:00+00:00"><meta property="article:modified_time" content="2022-08-18T11:24:00+00:00"><meta property="article:tag" content="Optimization"><meta property="article:tag" content="Image"><meta property="article:tag" content="Avif"><meta property="article:tag" content="Webp"><meta property="article:tag" content="Jp2"><meta name=twitter:card content="summary"><meta name=twitter:title content="Convert jekyll blog images to avif and webp with jekyll picture tag"><meta name=twitter:description content="How to convert the images of a jekyll blog to avif and webp formats using jekyll picture tag"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"Welcome on BBlog","name":"Convert jekyll blog images to avif and webp with jekyll picture tag","headline":"Convert jekyll blog images to avif and webp with jekyll picture tag","description":"How to convert the images of a jekyll blog to avif and webp formats using jekyll picture tag","abstract":"I have a blog with over 100 articles, mainly Compiti Scolastici (:it: School assignments), where I also convert images to the recent .avif and .webp formats.\nWhy convert images to modern formats? #Why did I do it? Mainly for three reasons:\nThe score of some pages with many images on PageSpeed was sometimes less than 90\/100 and it mildly infuriated me, because the website average is 98\/99 out of 100. After enabling webp conversion on my Hugo blog I noticed a better loading speed and savings on bandwidth and image size.","inLanguage":"en","url":"https:\/\/bortox.it\/en\/article\/jekyll-blog-webp-avif-images\/","author":{"@type":"Person","name":""},"copyrightYear":"2022","dateCreated":"2022-07-20T00:24:00\u002b00:00","datePublished":"2022-07-20T00:24:00\u002b00:00","dateModified":"2022-08-18T11:24:00\u002b00:00","keywords":["optimization","image","avif","webp","jp2"],"mainEntityOfPage":"true","wordCount":"1298"}</script><meta name=author content="Andrea Bortolotti"><script async data-goatcounter=https://contacapre.bortox.it/count src=/count.js></script><script async src=/share.js></script><meta name=theme-color content="#8A2BE2"><link rel=dns-prefetch href=https://bortox.goatcounter.com><link rel=dns-prefetch href=https://contacapre.bortox.it><link rel=preload href=/count.js as=script></head><body class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral"><div id=the-top class="absolute flex self-center"><a class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 print:hidden sm:py-10 dark:text-neutral"><nav class="flex items-start justify-between sm:items-center"><div class="flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/en/>üá¨üáß Andrea Bortolotti | Bortox üá™üá∫</a></div><ul class="flex list-none flex-col text-end sm:flex-row"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/en/article/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Blog üë®‚Äçüíª</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=https://bortox.it/galleria/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Photos üì∑</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5"><a href=/en/compiti/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">School üìù</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><button id=search-button-m0 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span></button></li></ul></nav></header><div class="relative flex grow flex-col"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 print:hidden dark:text-neutral-400"><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/en/>Welcome into the cuckoo's nest"</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/en/article/>Welcome on BBlog</a><span class="px-1 text-primary-500">/</span></li><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/en/article/jekyll-blog-webp-avif-images/>Convert jekyll blog images to avif and webp with jekyll picture tag</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Convert jekyll blog images to avif and webp with jekyll picture tag</h1><div class="mb-12 mt-8 text-base text-neutral-500 print:hidden dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-07-20 00:24:00 +0000 UTC">Wed, Jul 20, 2022</time><span class="px-2 text-primary-500">&#183;</span><time datetime="2022-08-18 11:24:00 +0000 UTC">üÜô Thu, Aug 18, 2022</time><span class="px-2 text-primary-500">&#183;</span><span>1298 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span><span class="px-2 text-primary-500">&#183;</span><span id=a1701f1bee00b0ecab046adfc34ad873 title="Page views">üôà</span>
<script async>var r=new XMLHttpRequest;r.addEventListener("load",function(){try{document.getElementById("a1701f1bee00b0ecab046adfc34ad873").innerText="üëÄ"+JSON.parse(this.responseText).count}catch{document.getElementById("a1701f1bee00b0ecab046adfc34ad873").innerText="üôà"}}),r.open("GET","https://contacapre.bortox.it/counter/"+encodeURIComponent("/en/article/jekyll-blog-webp-avif-images/".replace(/(\/)?$/,""))+".json"),r.send()</script><span class="px-2 text-primary-500">&#183;</span>
<span class=mb-[2px]><a href=https://github.com/bortox/bortox.github.io/tree/main/content/article/jekyll-blog-webp-avif-images.en.md class="text-lg hover:text-primary-500" rel="noopener noreferrer" target=_blank title="Edit content"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M490.3 40.4c21.9 21.87 21.9 57.33.0 79.2l-30 30.1-98-97.98 30.1-30.06C414.3-.2135 449.7-.2135 471.6 21.66L490.3 40.4zM172.4 241.7 339.7 74.34l98 97.96L270.3 339.6C264.2 345.8 256.7 350.4 248.4 353.2l-88.8 29.6C150.1 385.6 141.5 383.4 135 376.1 128.6 370.5 126.4 361 129.2 352.4l29.6-88.8C161.6 255.3 166.2 247.8 172.4 241.7v0zM192 63.1c17.7.0 32 15.23 32 32 0 18.6-14.3 32-32 32H96c-17.67.0-32 15.2-32 32V416c0 17.7 14.33 32 32 32H352c17.7.0 32-14.3 32-32V319.1c0-16.8 14.3-32 32-32s32 15.2 32 32V416c0 53-43 96-96 96H96c-53.02.0-96-43-96-96V159.1c0-53 42.98-96 96-96h96z"/></svg></span></a></span></div><div class="my-1 flex flex-wrap text-xs leading-relaxed text-neutral-500 dark:text-neutral-400"><a href=/en/categories/tutorial/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Tutorial</a>
<a href=/en/categories/github/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Github</a>
<a href=/en/tags/optimization/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Optimization</a>
<a href=/en/tags/image/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Image</a>
<a href=/en/tags/avif/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Avif</a>
<a href=/en/tags/webp/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Webp</a>
<a href=/en/tags/jp2/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Jp2</a></div></div></header><section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row"><div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8"><div class="toc pe-5 print:hidden lg:sticky lg:top-10"><details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5"><summary class="block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#why-convert-images-to-modern-formats>Why convert images to modern formats?</a></li><li><a href=#how-to-convert-images-to-webp-and-avif-on-jekyll>How to convert images to webp and avif on Jekyll</a><ul><li><a href=#responsive-images>Responsive images</a></li></ul></li><li><a href=#how-to-install-jekyll-picture-tag>How to install Jekyll Picture Tag</a></li><li><a href=#how-to-configure-jekyll-picture-tag>How to configure Jekyll Picture Tag</a><ul><li><a href=#how-to-choose-the-quality-of-converted-images>How to choose the quality of converted images?</a></li><li><a href=#increase-build-time-in-exchange-for-smaller-images>Increase build time in exchange for smaller images</a></li></ul></li><li><a href=#testing-jekyll-picture-tag>Testing Jekyll Picture Tag</a><ul><li><a href=#regex-to-convert-markdown-images-in-jekyll-picture-tags>Regex to convert Markdown Images in Jekyll Picture Tags</a></li></ul></li><li><a href=#jekyll-picture-tag-dependencies>Jekyll Picture Tag dependencies</a></li><li><a href=#how-to-use-jekyll-picture-tag-with-github-actions>How to use Jekyll Picture Tag with Github Actions</a></li><li><a href=#speed-up-local-build-time-by-removing-converted-images-from-gitignore>Speed up local build time by removing converted images from .gitignore</a></li></ul></nav></div></details></div></div><div class="min-h-0 min-w-0 max-w-prose grow"><p>I have a blog with over 100 articles, mainly <a href=https://bortox.it/Compiti-scolastici target=_blank rel=noreferrer>Compiti Scolastici (üáÆüáπ School assignments)</a>, where I also convert images to the recent .avif and .webp formats.</p><h2 id=why-convert-images-to-modern-formats class="relative group">Why convert images to modern formats? <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#why-convert-images-to-modern-formats aria-label=Anchor>#</a></span></h2><p>Why did I do it? Mainly for three reasons:</p><ul><li>The score of some pages with many images on PageSpeed was sometimes less than 90/100 and it mildly infuriated me, because the website average is 98/99 out of 100.</li><li>After enabling webp conversion on my Hugo blog I noticed a better loading speed and savings on bandwidth and image size. It&rsquo;s better for who uses the website too!</li><li>This <a href=https://idlewords.com/talks/website_obesity.htm target=_blank rel=noreferrer>article about the <em>obesity crisis</em> (üá¨üáß)</a> of the web convinced me to reduce the page size of bortox.it. Images were the biggest problem.</li></ul><h2 id=how-to-convert-images-to-webp-and-avif-on-jekyll class="relative group">How to convert images to webp and avif on Jekyll <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-to-convert-images-to-webp-and-avif-on-jekyll aria-label=Anchor>#</a></span></h2><p>I would venture to say that on Jekyll we almost have &lsquo;ready-made food&rsquo; (üáÆüáπ common saying) as an excellent plugin comes to our rescue: <strong>Jekyll Picture Tag</strong>, which enables both responsive images and conversion to more modern formats.</p><h3 id=responsive-images class="relative group">Responsive images <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#responsive-images aria-label=Anchor>#</a></span></h3><p>For those who don&rsquo;t know, when images on a site are responsive, several copies of each image are produced in different sizes (e.g. 200x, 400x, 800x, 1200x) and depending on the user&rsquo;s screen, the appropriate ones will be requested by the device.</p><p>For example, one of my customers on an IPhone may receive an image 400 pixels wide, while another on a laptop will receive one 1200 pixels wide, as he has a wider screen. In this way the loading of images is &lsquo;smarter&rsquo; and also faster without having a penalty on image quality.</p><h2 id=how-to-install-jekyll-picture-tag class="relative group">How to install Jekyll Picture Tag <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-to-install-jekyll-picture-tag aria-label=Anchor>#</a></span></h2><p>To install Jekyll Picture Tag just add to the Gemfile the gem <em>jekyll_picture\tag</em> in the group <em>jekyll_plugins</em>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>group</span> <span class=ss>:jekyll_plugins</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>	<span class=n>gem</span> <span class=s1>&#39;jekyll_picture_tag&#39;</span><span class=p>,</span> <span class=s1>&#39;~&gt; 2.0&#39;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><p>Next the module is installed, but now we need to <strong>configure it</strong>.</p><h2 id=how-to-configure-jekyll-picture-tag class="relative group">How to configure Jekyll Picture Tag <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-to-configure-jekyll-picture-tag aria-label=Anchor>#</a></span></h2><p>To configure the Jekyll Picture Tag module, create the file <code>_data/picture.yml</code>.</p><p>First, in the file you must specify the <em>media queries</em> set on the site.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>media_queries</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>mobile: &#39;max-width</span><span class=p>:</span><span class=w> </span><span class=l>600px&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>laptop: &#39;max-width</span><span class=p>:</span><span class=w> </span><span class=l>800px&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>wide: &#39;min-width</span><span class=p>:</span><span class=w> </span><span class=l>801px&#39;</span><span class=w>
</span></span></span></code></pre></div><p>On my site, a device is considered a smartphone if the screen is less than 600 pixels wide, a laptop less than 800px and something else if it is more than 800 pixels wide. I then changed some default parameters:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>formats</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>avif, webp, original]</span><span class=w> </span><span class=c># Order matters!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>format_quality</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>jpg</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>png</span><span class=p>:</span><span class=w> </span><span class=m>85</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>webp</span><span class=p>:</span><span class=w> </span><span class=m>75</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>avif</span><span class=p>:</span><span class=w> </span><span class=m>70</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>widths</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>200</span><span class=p>,</span><span class=w> </span><span class=m>400</span><span class=p>,</span><span class=w> </span><span class=m>800</span><span class=p>,</span><span class=w> </span><span class=m>1200</span><span class=p>,</span><span class=w> </span><span class=m>1600</span><span class=p>]</span><span class=w> </span><span class=c># Image widths, in pixels.</span><span class=w>
</span></span></span></code></pre></div><p>I set support for conversion to avif, webp and the original format of files, and different qualities for each format.</p><h3 id=how-to-choose-the-quality-of-converted-images class="relative group">How to choose the quality of converted images? <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-to-choose-the-quality-of-converted-images aria-label=Anchor>#</a></span></h3><p>Normally <strong>75</strong> is a good number for the quality of converted images and is used by default by <strong>Hugo</strong>, the framework for building static sites like this one from Google. On the official site of the conversion to .<strong>avif</strong> (<a href=https://avif.io/ target=_blank rel=noreferrer>https://avif.io/</a>) the default is <strong>70</strong>, evaluating these parameters I would recommend keeping in the 70 to 80 range for image quality.</p><p>For further customisation of picture.yml, I recommend referring to the <strong>documentation</strong> of Jekyll Picture Tag, available at <a href=https://rbuchberger.github.io/jekyll_picture_tag/ target=_blank rel=noreferrer>https://rbuchberger.github.io/jekyll_picture_tag/</a></p><h3 id=increase-build-time-in-exchange-for-smaller-images class="relative group">Increase build time in exchange for smaller images <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#increase-build-time-in-exchange-for-smaller-images aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>image_options</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>avif</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>compression</span><span class=p>:</span><span class=w> </span><span class=l>av1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>effort</span><span class=p>:</span><span class=w> </span><span class=m>7</span><span class=w> </span><span class=c># Up to 9 from 0, 9=really slow</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>png</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>compression</span><span class=p>:</span><span class=w> </span><span class=m>9</span><span class=w> </span><span class=c># Up to 9, fast</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>webp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>effort</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w> </span><span class=c># Up to 6 from 0, 4=default</span><span class=w>
</span></span></span></code></pre></div><p>With these options the effort of image conversion increases to over 100%, for savings of 5-10%. Avif takes like 10 times the time of webp conversion and webp takes longer than png.</p><p>If you build locally and as written below and you remove the JPT converted images folder from the .gitignore it can be an effective idea for better compression, else the build times are too high and leave the default.</p><p>More informations in <a href=https://rbuchberger.github.io/jekyll_picture_tag/users/presets/image_quality.html target=_blank rel=noreferrer>JPT Documentation (üá¨üáß)</a> and on <a href=https://www.libvips.org/API/current/VipsForeignSave.html#vips-heifsave target=_blank rel=noreferrer>libvips API Documentation (üá¨üáß)</a> on image compression options.</p><h2 id=testing-jekyll-picture-tag class="relative group">Testing Jekyll Picture Tag <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#testing-jekyll-picture-tag aria-label=Anchor>#</a></span></h2><p>As the name implies, Jekyll Picture Tag is a <strong>tag liquid</strong>, so it is added to pages in Markdown more or less like this {% <em>tag</em> %}.</p><h3 id=regex-to-convert-markdown-images-in-jekyll-picture-tags class="relative group">Regex to convert Markdown Images in Jekyll Picture Tags <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#regex-to-convert-markdown-images-in-jekyll-picture-tags aria-label=Anchor>#</a></span></h3><p>If you use VSCodium like I do, or any tool that supports regex, this is a great command for converting <code>![Alt text](/data/image.png)</code> images into picture tags <code>{% picture /data/image --alt Alt text %}</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>Find</span><span class=p>:</span><span class=w> </span><span class=o>!</span><span class=err>\</span><span class=o>[</span><span class=p>(.</span><span class=o>*?</span><span class=p>)</span><span class=err>\</span><span class=o>]</span><span class=err>\</span><span class=p>((.</span><span class=o>*?</span><span class=p>)</span><span class=err>\</span><span class=p>)</span><span class=err>\</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nl>Replace</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=o>%</span><span class=w> </span><span class=n>picture</span><span class=w> </span><span class=n>$2</span><span class=w> </span><span class=o>--</span><span class=n>alt</span><span class=w> </span><span class=n>$1</span><span class=w> </span><span class=o>%</span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><div class="flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900"><span class="pe-3 text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M506.3 417 293 53c-16.33-28-57.54-28-73.98.0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6c32.76.0 53.26-35 36.96-63zM232 168c0-13.25 10.75-24 24-24s24 10.8 24 24v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zm24 248c-17.36.0-31.44-14.08-31.44-31.44s14.07-31.44 31.44-31.44 31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>
</span></span><span class=dark:text-neutral-300>If you have a picture that uses liquid code like I do, e.g. <code>![Picture of test tubes]({{ "/data/img/chemistry/lss/acids-and-bases/provetteac.jpg" | relative_url }})</code> you have to <strong>remove it</strong>, because Jekyll Picture Tag needs a path to an existing file from the project root. The exemplary result should be <code>{% picture /data/img/chemistry/lss/acids-and-bases/provetteac.jpg --alt Picture of test tubes %}</code>. With some find & replace you get there.</span></div><h2 id=jekyll-picture-tag-dependencies class="relative group">Jekyll Picture Tag dependencies <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#jekyll-picture-tag-dependencies aria-label=Anchor>#</a></span></h2><p>Jekyll Picture Tag uses <a href=https://www.libvips.org/ target=_blank rel=noreferrer><strong>libvips</strong></a> to process pictures, along with <strong>imagemagick</strong>.</p><p>On Ubuntu, just install libvips-tools. On Alpine the package is called <em>vips</em>, on Debian Buster with YunoHost (my previous setup) don&rsquo;t even think about it: a hell of a lot of dependencies like obsolete meson to compile and reinstall, libvips, imagemagick&mldr; However it was luckily easy to setup Github Actions!</p><h2 id=how-to-use-jekyll-picture-tag-with-github-actions class="relative group">How to use Jekyll Picture Tag with Github Actions <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-to-use-jekyll-picture-tag-with-github-actions aria-label=Anchor>#</a></span></h2><p>Fortunately this time help is <a href="https://rbuchberger.github.io/jekyll_picture_tag/users/deployment.html?highlight=svg#github-pages" target=_blank rel=noreferrer>in the documentation</a> but it&rsquo;s no good. Since the system is Ubuntu, the repos don&rsquo;t yet have the lipvips version that supports <strong>avif</strong> - as of 2022/07/20 -, so we&rsquo;ll use an Arch-based system, whose repos get updates very quickly.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build and Deploy to Github Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>master</span><span class=w> </span><span class=c># Here source code branch is `master`, it could be other branches</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build_and_deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Use GitHub Actions&#39; cache to cache dependencies on servers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/cache@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>vendor/bundle</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-gems-${ hashFiles(&#39;**/Gemfile.lock&#39;) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>restore-keys</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            ${ runner.os }}-gems-.</span><span class=w>            
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Use GitHub Deploy Action to build and deploy to Github</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>jeffreytse/jekyll-deploy-action@v0.4.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>provider</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;github&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GH_TOKEN }}</span><span class=w> </span><span class=c># It&#39;s your Personal Access Token(PAT)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>pre_build_commands</span><span class=p>:</span><span class=w> </span><span class=l>pacman -S --noconfirm libvips imagemagick openjpeg2 libheif poppler libjxl libwebp libpng libjpeg-turbo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=c># Default is current repository</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;gh-pages&#39;</span><span class=w> </span><span class=c># Default is gh-pages for github provider</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>jekyll_src</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;./&#39;</span><span class=w> </span><span class=c># Default is root directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>jekyll_cfg</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;_config.yml&#39;</span><span class=w> </span><span class=c># Default is _config.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>jekyll_baseurl</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=c># Default is using _config.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>bundler_ver</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&gt;=0&#39;</span><span class=w> </span><span class=c># Default is latest bundler version</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>cname</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=c># Default is to not use a cname</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>actor</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=c># Default is the GITHUB_ACTOR</span><span class=w>
</span></span></span></code></pre></div><p>This is the build file that works for the setup just shown, just create a token with permission to write to the repos (specifically to the <em>gh-pages</em> branch), set the branch on which a push will enable the action (in my case, <em>master</em>) and add the imagemagick libvips and libs to support different formats like libheif installation to the pre_build_commands (<em>pacman -S &ndash;noconfirm libvips imagemagick openjpeg2 libheif poppler libjxl libwebp libpng libjpeg-turbo</em>).</p><p>All of those libraries in the pre_build_commands are required for different things:</p><ul><li>libvips -> necessary</li><li>imagemagick -> necessary</li><li>openjpeg2 -> jp2 support, format for old apple devices instead of webp</li><li>libheif -> avif support, modern format</li><li>poppler -> svg support</li><li>libjxl -> jpegxl support, royalty-free format sometimes better than webp/avif. In 2022, soon to be supported in most browsers.</li><li>libwebp -> webp support, Google image format, good compression</li><li>libpng -> png support</li><li>libjpeg-turbo -> jpeg support</li></ul><h2 id=speed-up-local-build-time-by-removing-converted-images-from-gitignore class="relative group">Speed up local build time by removing converted images from .gitignore <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#speed-up-local-build-time-by-removing-converted-images-from-gitignore aria-label=Anchor>#</a></span></h2><span class=flex><span class="ms-1 rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">This does not work with GitHub pages</span></span><p>If you want to speed up local build time, since Jekyll Picture Tag recognises when an image has already been converted, you can add the <code>_site/generated</code> (where the converted images are located in different formats) folder to git to avoid reconverting them each time.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Cache built images by Jekyll Picture Tag in _site/generated</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>_site/*
</span></span><span class=line><span class=cl>!_site/generated/
</span></span></code></pre></div></div></section><footer class="max-w-prose pt-8 print:hidden"><button share_title="Convert jekyll blog images to avif and webp with jekyll picture tag" share_description="How to convert the images of a jekyll blog to avif and webp formats using jekyll picture tag" share_permalink=https://bortox.it/en/article/jekyll-blog-webp-avif-images/ share_dialogue="Condividi 'Convert jekyll blog images to avif and ‚Ä¶'" class="sharebtn mb-2 px-1 py-[1px] border rounded-md border-neutral-200 dark:border-neutral-600 hover:border-primary-300 hover:text-primary-700 dark:hover:border-primary-600 dark:hover:text-primary-400">Share <i>Convert jekyll blog images to avif and ‚Ä¶</i> ‚úåÔ∏è</button><div class="flex mt-6"><picture><source type=image/webp srcset=/cuculo_hu5daa5672b47bfbcac383c7eafd10e02b_5344688_6e4c6b819893a7cbb898265adfb1180d.webp width=192 height=192><img class="w-20 h-20 !mt-0 !mb-0 ltr:mr-4 rtl:ml-4 rounded-full" width=96 height=96 alt="Andrea Bortolotti" src=/cuculo_hu5daa5672b47bfbcac383c7eafd10e02b_5344688_192x192_fill_q90_nearestneighbor_smart1.jpg></picture><div class="place-self-top ml-2"><div class="text-[0.6rem] leading-3 text-neutral-500 dark:text-neutral-400 uppercase">Author</div><div class="text-l font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Andrea Bortolotti</div><div class="text-m text-neutral-700 dark:text-neutral-400">Our virtues and our failings are inseparable, like force and matter. When they separate, man is no more. - Tesla</div><div class="text-2xl sm:text-lg"></div></div></div><div class="mt-8 ltr:lg:pl-8 rtl:lg:pr-8"><details open><summary class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 rtl:-mr-5 block py-1 text-xl font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 bg-neutral-100 dark:bg-neutral-700">Related posts</summary><ul><li class="border-solid border border-primary-600 rounded-lg mt-1 p-1 dark:border-neutral-600"><article><h3 class="flex items-center mt-2 text-m font-semibold"><a class="decoration-primary-500 hover:underline hover:underline-offset-2 text-neutral-800 dark:text-neutral" rel=prefetch href=/en/article/optimize-png-pngquant/>Optimize png images with pngquant</a></h3><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-07-19 00:00:00 +0000 UTC">Tue, Jul 19, 2022</time><span class="px-2 text-primary-500">&#183;</span><span>521 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">3 mins</span></div></div></article></li></ul></details></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://bortox.it/en/article/jekyll-blog-webp-avif-images/&amp;quote=Convert%20jekyll%20blog%20images%20to%20avif%20and%20webp%20with%20jekyll%20picture%20tag" title="Share on Facebook" aria-label="Share on Facebook" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://bortox.it/en/article/jekyll-blog-webp-avif-images/&amp;text=Convert%20jekyll%20blog%20images%20to%20avif%20and%20webp%20with%20jekyll%20picture%20tag" title="Tweet on Twitter" aria-label="Tweet on Twitter" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://bortox.it/en/article/jekyll-blog-webp-avif-images/&amp;resubmit=true&amp;title=Convert%20jekyll%20blog%20images%20to%20avif%20and%20webp%20with%20jekyll%20picture%20tag" title="Submit to Reddit" aria-label="Submit to Reddit" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://bortox.it/en/article/jekyll-blog-webp-avif-images/&amp;subject=Convert%20jekyll%20blog%20images%20to%20avif%20and%20webp%20with%20jekyll%20picture%20tag" title="Send via email" aria-label="Send via email" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a></section><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group" rel=prefetch href=/en/article/optimize-png-pngquant/><span class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Optimize png images with pngquant</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-07-19 00:00:00 +0000 UTC">Tue, Jul 19, 2022</time>
</span></span></a></span><span><a class="flex text-right group" rel=prefetch href=/en/article/fix-fastboot-error-divestos-fairphone-3/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Fix fastboot error boot partition is smaller than boot image when installing DivestOS on Fairphone</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-08-22 16:47:00 +0000 UTC">Mon, Aug 22, 2022</time>
</span></span><span class="ml-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex list-none flex-col sm:flex-row"><li class="group mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a href=/en/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">üè†</span></a></li><li class="group mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a href=https://bortox.it/contribuisci-cs-en/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Support üíπ</span></a></li><li class="group mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a href=https://uptime.bortox.it title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Uptime üìä</span></a></li><li class="group mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a href=/en/privacy/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Privacy Policy üõ°Ô∏è</span></a></li></ul></nav><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">Content license: <a href=https://creativecommons.org/licenses/by-nc-nd/4.0 target=_blank rel=noreferrer>üîó CC BY-NC-ND 4.0</a></p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"><div><div class="group relative"><button class="group-dark:hover:text-primary-400 flex w-full items-center justify-end transition-colors group-hover:text-primary-600">
<span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="currentcolor" d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286H4.545zm1.634-.736L5.5 3.956h-.049l-.679 2.022H6.18z"/><path fill="currentcolor" d="M0 2a2 2 0 012-2h7a2 2 0 012 2v3h3a2 2 0 012 2v7a2 2 0 01-2 2H7a2 2 0 01-2-2v-3H2A2 2 0 010 9V2zm2-1A1 1 0 001 2v7a1 1 0 001 1h7a1 1 0 001-1V2A1 1 0 009 1H2zm7.138 9.995c.193.301.402.583.63.846-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6.066 6.066.0 01-.415-.492 1.988 1.988.0 01-.94.31z"/></svg>
</span><span class=text-sm>EN</span><span class=text-[0.6rem]><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M233.4 105.4c12.5-12.5 32.8-12.5 45.3.0l192 192c12.5 12.5 12.5 32.8.0 45.3s-32.8 12.5-45.3.0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3.0s-12.5-32.8.0-45.3l192-192z"/></svg></span></span></button><div class="bottom-7 invisible absolute z-50 flex flex-col whitespace-nowrap rounded border border-neutral-300 bg-neutral text-start text-base shadow group-hover:visible ltr:right-0 rtl:left-0 dark:border-neutral-600 dark:bg-neutral-800"><div class="flex flex-grow"><a href=/article/jekyll-blog-webp-avif-images/ class="w-full py-1 pe-10 ps-2 decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2">Italiano</a></div><div class="flex flex-grow"><a href=/en/article/jekyll-blog-webp-avif-images/ class="flex w-full items-center justify-between bg-primary-100 px-2 py-1 dark:bg-primary-900">English<span class="ms-2 w-6 text-primary-600 dark:text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M438.6 105.4c12.5 12.5 12.5 32.7.0 45.2l-256 256c-12.5 12.5-32.7 12.5-45.2.0L9.372 278.6c-12.496-12.5-12.496-32.7.0-45.2 12.498-12.5 32.758-12.5 45.258.0L159.1 338.7 393.4 105.4c12.5-12.52 32.7-12.52 45.2.0h0z"/></svg></span></span></a></div></div></div></div><div class="me-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher-0 type=button aria-label="appearance switcher"><div class="flex h-12 w-12 items-center justify-center dark:hidden" title="Switch to dark appearance"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="hidden h-12 w-12 items-center justify-center dark:flex" title="Switch to light appearance"><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div></div><script type=module src=/sw.js></script><script>if("serviceWorker"in navigator){navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(()=>{console.log("Service Worker Registered")});const e=!0,t=["index","next","prev","prefetch"];function prefetchCache(){if(navigator.serviceWorker.controller){for(var n=[],t=document.links,e=0;e<t.length;e++)t[e].rel==="prefetch"&&n.push(t[e].href);n.forEach(e=>navigator.serviceWorker.controller.postMessage({action:"cache",url:e}))}}navigator.serviceWorker.ready.then(()=>{prefetchCache()})}</script></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm sm:p-6 md:p-[10vh] lg:p-[12vh] dark:bg-neutral-900/50" data-url=https://bortox.it/en/><div id=search-modal class="top-20 mx-auto flex min-h-0 w-full max-w-3xl flex-col rounded-md border border-neutral-200 bg-neutral shadow-lg dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex flex-none items-center justify-between px-2"><form class="flex min-w-0 flex-auto items-center"><div class="flex h-8 w-8 items-center justify-center text-neutral-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="mx-1 flex h-12 flex-auto appearance-none bg-transparent focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex h-8 w-8 items-center justify-center text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto overflow-auto px-2"><ul id=search-results></ul></section></div></div></div></body></html>